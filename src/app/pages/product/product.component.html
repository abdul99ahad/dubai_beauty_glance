<div class="grid" *ngIf="productDetail">
  <div class="col-12 md:col-12 lg:col-12">
    <app-ad-banner></app-ad-banner>
  </div>
  <div class="col-12 md:col-6 lg:col-6">
    <div class="keyImg">
      <div class="thumbnail">
        <img [src]="productDetail.image" [alt]="productDetail.name" />
      </div>
      <div style="margin: 10%">
        <lightgallery [settings]="settings" style="display: flex">
          <a
            [href]="secondaryImage"
            class="product-detail-images"
            *ngFor="let secondaryImage of productDetail.secondary_images"
          >
            <img [src]="secondaryImage" />
          </a>
        </lightgallery>
      </div>
    </div>
  </div>
  <div class="col-12 md:col-6 lg:col-6">
    <div class="infoArea">
      <div class="headingArea" style="display: flex">
        <div style="width: 80%">
          <h2>{{ productDetail.name }}</h2>
        </div>
        <div style="width: 20%; display: flex">
          <img
            [alt]="productDetail.brand.country_name"
            [src]="productDetail.brand.country_flag"
            style="max-width: 50%"
          />
          <p style="font-size: 18px; margin: auto">
            {{ productDetail.brand.country_code.toUpperCase() }}
          </p>
        </div>
      </div>

      <div>
        <table class="prd-tb">
          <tbody>
            <tr class="prd_brand_css xans-record-">
              <th scope="row">
                <span style="font-size: 12px; color: #555555">Brand</span>
              </th>
              <td>
                <span style="font-size: 12px; color: #555555">
                  <a [routerLink]="'/brand/' + productDetail.brand.slug">{{
                    productDetail.brand.name
                  }}</a>
                </span>
              </td>
            </tr>
            <tr class="product_price_css xans-record-">
              <th scope="row">
                <span style="font-size: 12px; color: #555555; font-weight: bold"
                  >Price</span
                >
              </th>
              <td>
                <span
                  style="font-size: 12px; color: #555555; font-weight: bold"
                >
                  <strong
                    [style.text-decoration]="
                      !productDetail.discount_price ? 'initial' : 'line-through'
                    "
                    >$ {{ productDetail.price }}</strong
                  >
                </span>
              </td>
            </tr>
            <tr
              *ngIf="productDetail.discount_price"
              class="prd_price_sale_css xans-record-"
            >
              <th scope="row">
                <span style="font-size: 12px; color: #323232"
                  >Discounted Price</span
                >
              </th>
              <td>
                <span>
                  <span style="font-size: 12px; color: #323232">
                    <span id="span_product_price_sale"
                      >$ {{ productDetail.discount_price }}
                      <span style="font-size: 12px; color: #555555"
                        >($
                        {{
                          +productDetail.price - +productDetail.discount_price
                        }}
                        discount)</span
                      >
                    </span>
                  </span>
                </span>
              </td>
            </tr>
            <tr class="simple_desc_css xans-record-">
              <th scope="row">
                <span style="font-size: 12px; color: #555555">Description</span>
              </th>
              <td>
                <span style="font-size: 12px; color: #555555">{{
                  productDetail.description
                }}</span>
              </td>
            </tr>
            <tr class="simple_desc_css xans-record-">
              <th scope="row">
                <span style="font-size: 12px; color: #555555">Variants</span>
              </th>
              <td>
                <p-toggleButton
                  *ngFor="
                    let productOption of productDetail.optionValues;
                    index as productOptionIndex
                  "
                  [onLabel]="productOption.name"
                  [offLabel]="productOption.name"
                  [ngModel]="checkedOptions[productOptionIndex]"
                  (ngModelChange)="
                    toggleProductOptionSelection(productOptionIndex)
                  "
                ></p-toggleButton>
              </td>
            </tr>
          </tbody>
        </table>

        <p-divider></p-divider>
      </div>
      <div>
        <p class="info">
          (Minimum Order : {{ productDetail.min_order_quantity }} or more )
        </p>
      </div>
      <div id="totalProducts" class="">
        <p class="ec-base-help txtWarn txt11">Select quantity.</p>
        <p class="ec-base-help txtWarn txt11 displaynone">
          Product will be automatically added below when you select an option.
        </p>
        <table>
          <caption class="displaynone">
            Product List
          </caption>
          <colgroup>
            <col style="width: auto" />
            <col style="width: 76px" />
            <col style="width: 150px" />
          </colgroup>
          <thead class="displaynone">
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Quantity</th>
              <th scope="col">Price</th>
            </tr>
          </thead>
          <tbody class="">
            <tr>
              <td>{{ productDetail.description }}</td>
              <td>
                <span class="quantity">
                  <input
                    id="quantity"
                    name="quantity_opt[]"
                    [(ngModel)]="selectedQuantity"
                    (ngModelChange)="updateTotalPrice(selectedQuantity)"
                    type="number"
                  />
                  <a href="javascript:void(0)" class="up QuantityUp">
                    <img
                      src="//img.echosting.cafe24.com/skin/base_en_US/product/btn_count_up.gif"
                      alt="up"
                      (click)="quantityUp()"
                    />
                  </a>
                  <a href="javascript:void(0)" class="down QuantityDown">
                    <img
                      src="//img.echosting.cafe24.com/skin/base_en_US/product/btn_count_down.gif"
                      alt="down"
                      (click)="quantityDown()"
                    />
                  </a>
                </span>
              </td>
              <td class="right">
                <span class="quantity_price"></span>
                $ {{ totalPrice }}
                <span class="mileage displaynone" style="display: none">
                  <img src="" />&nbsp;<span class="mileage_price">0 </span>
                </span>
              </td>
            </tr>
            <tr
              id="totalProductsOption"
              class="xans-element- xans-product xans-product-option option xans-record-"
            >
              <td class="middle" colspan="3">
                <table class="displaynone">
                  <caption>
                    Option Information
                  </caption>
                  <colgroup>
                    <col style="width: 105px" />
                    <col style="width: auto" />
                  </colgroup>
                  <tbody></tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div id="totalPrice" class="totalPrice">
        <strong>Price</strong>
        (Quantity) :
        <span class="total">
          <strong>
            <em>$ {{ discountedTotalPrice }}</em>
          </strong>
          ({{ selectedQuantity }} item(s))
        </span>
      </div>

      <div style="margin: 15px 0">
        <p style="font-size: 16px; margin-bottom: 15px">
          Free Shipping : On Bill above $ 3,000 (else $ 200) (Not applicable for
          discounted items)
        </p>
        <img
          src="https://beautyglance.pk/image/catalog/icons/free-gifts.jpg"
          alt="gifts"
          class="gifts-img"
        />
        <p>
          Services:
          <img
            class="custom_features_image"
            src="https://beautyglance.pk/image/catalog/icons/checkbox-pink.jpg"
            alt="pink"
          />
          Delivery 2-3 working days
          <img
            class="custom_features_image"
            src="https://beautyglance.pk/image/catalog/icons/checkbox-pink.jpg"
            alt="pink"
            style="margin-left: 10px"
          />
          Original Guaranteed
        </p>
      </div>

      <div>
        <app-input-button buttonText="Buy Now"></app-input-button>
        <div class="buynow_btn_wrap m_margin">
          <a href="#none" class="btnNormal sizeL btnBasket add_cart_btn"
            >Add to Cart</a
          >
          <a href="#none" class="btnNormal sizeL btnWish add_cart_btn"
            >Add to WishList</a
          >
        </div>
      </div>
    </div>
  </div>
  <div class="col-12 md:col-12 lg:col-12 box" style="height: 500px"></div>

  <p-dialog
    [(visible)]="display"
    position="bottom-left"
    [draggable]="false"
    class="web-view"
  >
    <app-product-description
      [selectedQuantity]="selectedQuantity"
      [totalPrice]="totalPrice"
      [productDetail]="productDetail"
      class="web-view"
    ></app-product-description>
  </p-dialog>
</div>
